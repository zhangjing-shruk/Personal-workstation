# Git 工作流程 - 自然语言指令手册

> 本文档定义了通过 Claude Code 使用自然语言操作 Git 的完整工作流程

## 🎯 设计理念

**"AI-First 开发模式"**：开发者使用自然语言表达意图，Claude Code 自动执行所有 Git 技术操作，让开发者专注于创意和逻辑实现。

## 📚 完整指令集

### 📦 基础提交操作
| 自然语言指令 | Claude 执行的操作 | Git 命令 |
|-------------|------------------|----------|
| "请同步到 git" | 智能提交所有更改并推送到 GitHub | `git add . && git commit -m "智能生成描述" && git push` |
| "保存进度" | 创建进度保存点 | `git add . && git commit -m "保存当前进度"` |
| "提交这些更改" | 分析修改内容，生成合适的提交信息 | `git add . && git commit -m "基于修改内容的描述"` |
| "推送到 GitHub" | 将本地提交推送到远程仓库 | `git push` |
| "备份当前工作" | 创建本地提交备份 | `git add . && git commit -m "工作备份 - [时间戳]"` |

### 🔍 查看和分析操作
| 自然语言指令 | Claude 执行的操作 |
|-------------|------------------|
| "查看修改了什么" | 显示文件变更状态和具体修改内容 |
| "这次改了什么" | 用通俗语言解释当前的代码修改 |
| "看看历史记录" | 显示最近的提交历史和变更概览 |
| "最近做了什么" | 总结最近几次提交的开发进展 |
| "项目状态如何" | 全面检查：未提交文件、分支状态、同步状态等 |
| "有什么问题吗" | 检查潜在问题：冲突、未跟踪文件、分支分歧等 |

### ⏪ 撤销和恢复操作
| 自然语言指令 | Claude 执行的操作 |
|-------------|------------------|
| "撤销刚才的修改" | 恢复工作区到上次提交状态 |
| "回到之前的版本" | 引导选择版本并安全回退 |
| "[文件名]改坏了" | 恢复指定文件到上次提交状态 |
| "取消刚才的提交" | 撤销最后一次提交但保留代码修改 |
| "恢复到昨天的版本" | 根据时间查找并恢复到指定版本 |

### 🌿 分支管理操作
| 自然语言指令 | Claude 执行的操作 |
|-------------|------------------|
| "创建新功能分支" | 基于当前代码创建 feature/[功能名] 分支 |
| "开发[功能名]功能" | 创建功能分支并切换，准备开发环境 |
| "切换到主分支" | 安全切换到 main 分支（保存当前工作） |
| "合并功能分支" | 将当前功能分支合并到 main 分支 |
| "完成功能开发" | 合并分支、推送更新、清理临时分支 |
| "删除旧分支" | 安全删除不需要的分支 |

### 🔧 高级操作
| 自然语言指令 | Claude 执行的操作 |
|-------------|------------------|
| "整理提交历史" | 使用 interactive rebase 整理提交 |
| "修改提交信息" | 修正最后一次提交的描述信息 |
| "暂存当前工作" | 使用 stash 保存未完成的修改 |
| "恢复暂存的工作" | 恢复之前 stash 的内容 |
| "同步远程更新" | 拉取远程更新并处理可能的冲突 |
| "重新整理代码" | 清理无用文件、整理项目结构 |

## 🎓 Claude 的智能响应模式

### 📊 操作后状态报告
每次操作完成后，Claude 会提供：
```
✅ 操作成功完成！

📈 本次提交统计：
- 新增文件：[数量] 个
- 修改文件：[数量] 个  
- 删除文件：[数量] 个
- 代码行变更：+[增加] -[删除]

🔗 GitHub 链接：[提交链接]
💡 提交信息：[智能生成的描述]
```

### 🧠 教学式解释
每次操作后包含学习要点：
- **为什么这样做**：解释操作原理和最佳实践
- **相关概念**：Git 核心概念的通俗解释
- **下次建议**：类似场景的处理建议

### ⚠️ 主动建议和提醒
Claude 会主动识别并建议：
- 合适的分支创建时机
- 提交粒度的优化建议
- 潜在问题的预警和解决方案
- 代码同步的最佳时机

## 🛡️ 安全保障原则

### 数据安全
- **永不丢失代码**：任何危险操作前自动创建备份
- **渐进式操作**：复杂操作分步执行，每步确认
- **可撤销设计**：所有操作都可以安全回退

### 操作安全
- **智能冲突处理**：自动检测并安全解决合并冲突
- **权限确认**：重要操作前征求用户确认
- **状态验证**：每步操作后验证系统状态

## 🎯 使用场景示例

### 场景1：完成功能开发
**用户**："刚完成了用户登录功能，请同步到 git"
**Claude 执行**：
1. `git status` - 检查修改文件
2. 分析代码变更内容
3. 生成提交信息：`"新增用户登录功能 - 包含表单验证、JWT认证和错误处理"`
4. `git add .` - 添加所有相关文件
5. `git commit` - 创建提交
6. `git push` - 推送到远程仓库
7. 提供详细的操作报告

### 场景2：处理代码问题
**用户**："糟糕，我把样式文件改坏了"
**Claude 执行**：
1. `git status` - 检查当前状态
2. `git diff` - 显示具体修改
3. 询问恢复选项：A) 完全恢复 B) 部分恢复 C) 查看详细差异
4. 根据选择执行相应的 `git checkout` 或 `git restore`
5. 验证恢复结果并报告

### 场景3：开始新功能
**用户**："我想开发购物车功能"
**Claude 执行**：
1. 确保当前分支干净：`git status`
2. 切换到主分支：`git checkout main`
3. 拉取最新代码：`git pull`
4. 创建功能分支：`git checkout -b feature/shopping-cart`
5. 设置远程跟踪：`git push -u origin feature/shopping-cart`
6. 提供分支开发指导

## 📈 学习进阶路径

### 初学者阶段（完全依赖自然语言）
- 使用基础提交指令
- 了解 Git 基本概念
- 建立良好的提交习惯

### 进阶阶段（理解背后原理）
- 学习分支操作
- 处理冲突和问题
- 掌握撤销和恢复

### 高级阶段（独立使用 Git）
- 复杂历史整理
- 团队协作流程
- 自定义工作流程

## 🔧 扩展和定制

### 项目特定指令
可以根据项目特点添加专门指令：
- "部署到测试环境" - 触发特定的部署分支操作
- "准备发布版本" - 执行版本标签和发布准备
- "同步开发环境" - 执行项目特定的环境同步

### 团队协作指令
- "创建合并请求" - 自动创建 Pull Request
- "同步团队更新" - 拉取团队最新代码
- "解决代码冲突" - 智能处理多人协作冲突

---

## 💡 最佳实践建议

1. **频繁提交**：完成小功能就提交，避免大批量修改
2. **清晰描述**：让 Claude 自动生成语义化的提交信息
3. **分支开发**：新功能使用独立分支开发
4. **及时同步**：定期与远程仓库同步
5. **问题处理**：遇到问题立即寻求 Claude 帮助

---

*本文档将随着使用经验不断完善和更新*